<!DOCTYPE html>
<html>
   <head>
      <title>校园帮帮网-登陆</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0" http-equiv="Content-Type" content="text/html; charset=utf-8">
      <!-- 引入 Bootstrap -->
      <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
      <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
      <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	  <script src="js/util.js"></script>
	  <link rel="bookmark"  type="image/x-icon"  href="pic/favicon.ico"/>
      <link rel="shortcut icon" href="pic/favicon.ico">
      <style>
      .navbar-fixed-top ~ .content {   padding-top: 70px;}.navbar-fixed-bottom ~ .content {  padding-bottom: 70px;}
	  </style>

   </head>

   <body>


    <div class="container">
	<div class="row clearfix">
		<div class="col-md-12 column">
			<div class="page-header">
				<h1>
					<img src="pic/icon2.png" height="46" width="46" style="float:left"/>
					<img src="pic/title.png" height="15%" width="15%" style="float:left"/>
					<small>&nbsp;&nbsp;登陆</small>
				</h1>
			</div>




			<div class="carousel slide" id="carousel-373022">
				<ol class="carousel-indicators">
					<li class="active" data-slide-to="0" data-target="#carousel-373022">
					</li>
					<li data-slide-to="1" data-target="#carousel-373022">
					</li>
					<li data-slide-to="2" data-target="#carousel-373022">
					</li>
				</ol>
				<div class="carousel-inner">
					<div class="item">
						<img alt="" src="pic/loginshow/pic1.jpg" />
						<div class="carousel-caption">
							<h4>
								密码学笔记分享
							</h4>
							<p>
								这是一篇个人所作的密码学笔记，记录了一些从CSDN以及其他博客上摘录的DES加密算法相关内容，以及一些关于矩阵求逆的小技巧，需要自取......
							</p>
						</div>
					</div>
					<div class="item active">
						<img alt="" src="pic/loginshow/pic2.jpg" />
						<div class="carousel-caption">
							<h4>
								考研择校指南
							</h4>
							<p>
								收集了137所双一流高校以及部分一本行业强校的报录比数据与复习资料
							</p>
						</div>
					</div>
					<div class="item">
						<img alt="" src="pic/loginshow/pic3.jpg" />
						<div class="carousel-caption">
							<h4>
								法硕非法学复习纲要
							</h4>
							<p>
								法学非法的复习纲要，内容很齐全，附带网课视频以及上岸学长学姐的笔记和真题回忆。
							</p>
						</div>
					</div>
				</div> <a class="left carousel-control" href="#carousel-373022" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a> <a class="right carousel-control" href="#carousel-373022" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
			</div>



			<hr/>
			<form class="form-horizontal" role="form" id="login_form" target="iframe" method="POST">
				<br/><br/>
				<div class="form-group">
					 <label for="inputEmail3" class="col-sm-4 control-label">账号</label>
					<div class="col-sm-5">
						<input class="form-control" id="username" name="username" type="text" />
					</div>
				</div>
				<div class="form-group">
					 <label for="inputPassword3" class="col-sm-4 control-label">密码</label>
					<div class="col-sm-5">
						<input  class="form-control" id="password" name="password" type="password" />
					</div>


					<div class="col-sm-offset-5 col-sm-10" style="margin-top:10px">
						<div class="login_log" style="display: inline
						;">
							<button  id="login_btn" class="btn btn-default btn-success" >登 陆</button>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						</div>
						<a class='btn btn-default ' href="forgetPwd.html">忘记密码</a>
						 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						 <input type="checkbox" />记住我</label>
					</div>
				</div>
			</form> 
			<iframe id="iframe" name="iframe" style="display:none;"></iframe>
		</div>

		<script type="text/javascript">
			//var loginButton = document.getElementById("login");
			$(login_btn).click(function(e){
			   var username = $.trim($("#username").val());
			   var password = $.trim($("#password").val());
				// if(username == ""){
				// 	alert("请输入用户名");
				// 	return false;
				// }else if(password == ""){
				// 	alert("请输入密码");
				// 	return false;
				// }
				//ajax去服务器端校验
				var data= {"account":username,"password":password};
				console.info(data);
				$.ajax({
					url: "http://localhost:8888/user",
					type: "post", 
					data:JSON.stringify(data),
					contentType: 'application/json;charset=utf-8',
					success: function (data) {
						if(data.code == 200){
							//身份校验成功
							login(data.data);
						}else if(data.code == 401){
							//密码错误
							alert("密码错误");
						}else if(data.code == 400){
							//账号不存在
							alert("账号不存在");
						}
					}
				});
						
			});
			
			function login(userVO){//根据用户信息跳转到相应页面
				updateUser(userVO);
				if(userVO.user.identity == "administrator"){//管理员用户
					window.location.href = "管理员界面/index.html";
				}else if(userVO.user.identity == "student" || user.identity == "teacher"){
					window.location.href = "index.html";
				}
				
			}
		</script>
		
	</div>
	</div>
   </body>

   
</html>