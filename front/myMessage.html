<!DOCTYPE html>
<html>
   <head>
      	<title>æ ¡å›­å¸®å¸®ç½‘-ä¸ªäººä¸­å¿ƒ</title>
      	<meta name="viewport" content="width=device-width, initial-scale=1.0" http-equiv="Content-Type" content="text/html; charset=utf-8">
      	<!-- å¼•å…¥ Bootstrap -->
      	<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
		<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="js/util.js"></script>
      	<link rel="bookmark"  type="image/x-icon"  href="pic/favicon.ico"/>
      	<link rel="shortcut icon" href="pic/favicon.ico">
   </head>
   <body>
      	<!-- æé—®æ¨¡æ€æ¡†ï¼ˆModalï¼‰ -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—
						</button>
						<h4 class="modal-title" id="myModalLabel">æé—®</h4>
					</div>
					<div class="modal-body">
						<div >
							<div class="row clearfix">
								<div class="col-md-12 column">
									<div class="alert alert-dismissable alert-info">
					 					<button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
											<h4>æé—®é¡»çŸ¥</h4>
											<strong>æ³¨æ„ï¼</strong>
											è¯·æå‡ºæœ‰æ„ä¹‰çš„æ¶ˆæ¯ï¼Œè¯·å‹¿å‘è¡¨çŒæ°´å†…å®¹ã€‚
											<a href="#" class="alert-link">ã€æ¶ˆæ¯ç®¡ç†æ¡ä¾‹ã€‘</a>
									</div>
								</div>
							</div>
						</div>
						<form class="form-horizontal" role="form" target="iframe">
							
							<div class="form-group">
									<label for="inputQue" class="col-sm-2 control-label">é—®é¢˜</label>
									<div class="col-sm-9">
										<input type="text" class="form-control" id="inputQue" />
									</div>
								</div>
								<div class="form-group">
									<label for="describeQue" class="col-sm-2 control-label">æè¿°</label>
									<div class="col-sm-9">
										<textarea class="form-control" rows="3" id="describeQue" style="max-width: 100%"></textarea>
									</div>
								  </div>
								<div style="text-align:center">
									<button type="button" class="btn btn-primary" onclick="postQuestion()">æ äº¤</button>
									<button type="button" class="btn btn-default" data-dismiss="modal" id="closeQue">å…³ é—­</button>
								</div>
							</form>
							<iframe id="iframe" name="iframe" style="display:none;"></iframe>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->

    <div class="container">
	<div class="row clearfix">
		<div class="col-md-12 column">
			<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
				<div class="navbar-header">
					 <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><img src="pic/icon.png" height="40" width="40" vsapce="50" style="float:left"/></a>
				</div>
				
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" >
					<ul class="nav navbar-nav">
						<li>
							 <a href="index.html">é¦–é¡µ</a>
						</li>
						<li>
							 <a href="#" data-toggle="modal" data-target="#myModal">æé—®</a>
						</li>
						<li class="dropdown">
							<a href="questionList.html">ç­‰ä½ æ¥ç­”</a>
						</li>
					</ul>
					<form class="navbar-form navbar-left" role="search">
						<div class="form-group">
							<input type="text" class="form-control" />
						</div> <button type="submit" class="btn btn-default">ğŸ”</button>
					</form>
					<ul class="nav navbar-nav navbar-right">
						<li>
							 <a href="message.html">ğŸ””</a>
						</li>
						<li class="active">
							 <a href="usrInfo.html">æˆ‘çš„&nbsp;&nbsp;&nbsp;</a>
						</li>
					</ul>
				</div>
				

			</nav>
			<div class="page-header" style="top:130">
				<br/>
				<h1 >
					ä¸ªäººä¸­å¿ƒ <small></small>
				</h1>
			</div>
		</div>
	</div>
	<div class="row clearfix">
		<div class="col-md-8 column">
			<ul class="nav nav-tabs">
				<li>
					 <a href="usrInfo.html">å…³æ³¨æ¶ˆæ¯</a>
				</li>
				<li>
					 <a href="myAnswer.html">æˆ‘çš„å›ç­”</a>
				</li>
				<li>
					 <a href="myQuestion.html">æˆ‘çš„æé—®</a>
				</li>
				<li class="active">
					<a href="myMessage.html">æˆ‘çš„æ¶ˆæ¯</a>
			   </li>
			   <li>
				<a href="exchange.html">å¥–åŠ±å…‘æ¢</a>
		   	   </li>
				<li class="dropdown pull-right">
					 <a href="#" data-toggle="dropdown" class="dropdown-toggle">å…¶ä»–<strong class="caret"></strong></a>
					<ul class="dropdown-menu">
						<li>
							 <a href="editPwd.html">ä¿®æ”¹å¯†ç </a>
						</li class="disabled">
						<li>
							 <a href="#">ä¿®æ”¹ä¿¡æ¯</a>
						</li>
						<li class="divider">
						</li>
						<li>
							 <a href="login.html">é€€å‡ºç™»å½•</a>
						</li>
					</ul>
				</li>
			</ul>
			<!-- å†…å®¹å†™åœ¨è¿™é‡Œï¼ï¼ï¼ -->
			<!--é¡µé¢ä¸»è¦å†…å®¹å®¹å™¨-->
			<div id="messageDiv">
				<!--æ¶ˆæ¯åˆ—è¡¨å®¹å™¨-->
				<div id="messageList">

				</div>
	
				<ul class="pagination pagination-lg" id="pageButtons">
					<li>
						 <a id="previous">å‰é¡µ</a>
					</li>
					<li>
						 <a href="#">1</a>
					</li>
					<li>
						 <a id="next">åé¡µ</a>
					</li>
				</ul>
			</div>

			<!-- å†…å®¹å†™åœ¨è¿™é‡Œï¼ï¼ï¼ -->
		</div>
		<div class="col-md-4 column">
			<img alt="140x140" src="http://cdn.ibootstrap.cn/lorempixel.com/140/140/default.jpg" class="img-circle" />
			<dl>
				<dt>å§“å</dt>
				<dd id="infoName">å¼ ä¸‰</dd>
				<dt>å­¦å·</dt>
				<dd id="infoAccount">221701300</dd>
			</dl>
			<dl>
				<dt>ç­‰çº§</dt>
				<dd id="infoLevel">0</dd>
				<dt>ç§¯åˆ†</dt>
				<dd id="infoScore">0</dd>
			</dl>
			<dl>
				<dt>æé—®</dt>
				<dd id="infoQuesNum">3</dd>
				<dt>å›ç­”</dt>
				<dd id="infoRespNum">0</dd>
				<dt>å…³æ³¨</dt>
				<dd id="infoFocusNum">0</dd>
			</dl>
		</div>
	</div>

	</div>


   </body>
      
<script>
    //æ¶ˆæ¯å®¹å™¨
    var messageDiv = document.getElementById("messageDiv");
    //å­˜æ”¾æ¶ˆæ¯åˆ—è¡¨çš„div
	var messageList = document.getElementById("messageList");
	//åˆ†é¡µçš„æŒ‰é’®åˆ—è¡¨
    var pageButtons = document.getElementById("pageButtons");
	//ä¸Šä¸€é¡µæŒ‰é’®
	var preButton = document.getElementById("previous");
    //ä¸‹ä¸€é¡µæŒ‰é’®
    var nextButton = document.getElementById("next");
    //å½“å‰é¡µé¢æ˜¾ç¤ºçš„æ•°æ®(ä¼ é€’ç»™åç«¯çš„æ•°æ®)
    var page = {
            "pageIndex":1,
            "count":2,
        };

	//è¯·æ±‚åç«¯çš„url
    var path = "http://localhost:8888/userMessages/1";


    //é¡µé¢åŠ è½½æ—¶å¯åŠ¨é¡µé¢
    $(document).ready(function(e) {
        //é¦–é¡µæŒ‰æ—¶é—´æ’åº
		changeQuestionPage(page, path);
		//è·å–å½“å‰ç™»å½•ç”¨æˆ·
		var userVO = localStorage.getExpire("userVO");
		if(userVO == null){//ç™»å½•è¿‡æœŸï¼Œè¿”å›ç™»å½•é¡µé¢
			window.location.href = "login.html";
		}else{
			var b = document.getElementById("infoName");
			b.innerHTML = userVO.user.name;
			//console.info($(infoName).innerHTML);
			//$(infoName).innerHTML = userVO.user.name;
			console.info(userVO.user.name);
			initInfo(userVO);
		}
    });

    //ä¸Šä¸€é¡µç‚¹å‡»äº‹ä»¶
    $(previous).click(function(e){
        messageDiv.removeChild(messageList);
        messageList = document.createElement("div");
        messageDiv.insertBefore(messageList, pageButtons);
        messageList.setAttribute("id","messageList");
        page.pageIndex--;
        changeQuestionPage(page, path);
    })

    //ä¸‹ä¸€é¡µç‚¹å‡»äº‹ä»¶
    $(next).click(function(e){
        messageDiv.removeChild(messageList);
        messageList = document.createElement("div");
        messageDiv.insertBefore(messageList, pageButtons);
        messageList.setAttribute("id","messageList");
        //pageButtons.removeAttribute("disabled");
        page.pageIndex++;
        changeQuestionPage(page, path);
    })

    //æ›´æ–°æ¶ˆæ¯åˆ—è¡¨
    function updateList(p){
        page = p;
        var list = page.messages;
        list = Array.prototype.slice.call(list);
        for(var i = 0; i < list.length; i++){
            //åˆ›å»ºå­˜æ”¾å•ä¸ªæ¶ˆæ¯çš„blockquote
            var messageBlock = document.createElement("blockquote");
            //åˆ›å»ºå­˜æ”¾æ¶ˆæ¯æè¿°çš„pæ ‡ç­¾
            var content = document.createElement("small");
            content.innerHTML = "æ¶ˆæ¯æè¿°ï¼š" + list[i].description;//æ¶ˆæ¯æè¿°
            messageBlock.appendChild(content);
			messageList.appendChild(messageBlock);
			
			//æ›´æ–°åˆ†é¡µæŒ‰é’®
			updatePageButtons();
        }
	}
	
	//æ›´æ–°åˆ†é¡µæŒ‰é’®
	function updatePageButtons(){
		if(page.hasPrevious == true){//æœ‰ä¸Šä¸€é¡µ
			console.info("æœ‰ä¸Šä¸€é¡µ");
		}else{//æ²¡æœ‰ä¸Šä¸€é¡µ
			console.info("æ²¡æœ‰ä¸Šä¸€é¡µ");
		}

		if(page.hasNext == true){//æœ‰ä¸‹ä¸€é¡µ
			console.info("æœ‰ä¸‹ä¸€é¡µ");
		}else{
			console.info("æ²¡æœ‰ä¸‹ä¸€é¡µ");
		}
	}
</script>
</html>